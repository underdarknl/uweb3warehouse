[header]
<section>
    <h2>Your Products {{ if [supplier] }} sourced from [supplier:name]{{ endif }}:</h2>
    {{ if len([products:items]) > 0 or [query] or [supplier] }}
    <form action="/products" method="get" class="lineform">
        <div>
            <label for="query">Search</label>
            <input id="query" type="text" name="query" value="{{ if [query] }}[query]{{ endif}}" placeholder="Filter your products"></div>
        <div>
            <label for="query">Supplier</label><select name="supplier" id="filter_supplier">
                <option value="">All</option>
                {{ for filtersupplier in [suppliers] }}
                <option value="[filtersupplier:ID]" {{ if [supplier] and [filtersupplier:ID]==[supplier:ID]}}selected{{
                    endif }}>[filtersupplier:name]</option>
                {{ endfor }}
            </select>
        </div>
        <div>
            <a class="button" href="/">Clear</a> <input id="query" type="submit" value="Filter">
        </div>
    </form>
    {{ if [products] }}
    <table class="products">
        <thead>
            <tr>
                <th>Name</th>
                <th>Created</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>
            {{ for product in [products] }}
            <tr>
                <td><a href="/product/[product:sku]">[product:name]</a></td>
                <td title="[product:dateCreated]">[product:dateCreated|DateOnly]</td>
                <td>
                    <form action="/product/[product:sku]/delete" method="post">
                        <input type="hidden" name="xsrf" value="[xsrf]">
                        <input type="submit" value="Remove"
                            onclick="return confirm('Are you sure you want to delete this products? All coupled sub products will not be deleted.');">
                    </form>
                </td>
            </tr>
            {{ endfor }}
        </tbody>
    </table>

    {{ if [products:pagecount] > 1 or [products:current] > 1 }}
    <nav class="pagination">
        <ol>
            {{ if [products:current] > 1 }}
            <li><a href="?page=1{{ ifpresent [linkarguments] }}&amp;[linkarguments]{{ endif }}"
                    title="Go to page 1">First</a></li>
            {{ if [products:current] > 2 }}
            <li><a href="?page=[products:prev]{{ ifpresent [linkarguments] }}&amp;[linkarguments]{{ endif }}"
                    title="Go to page [products:items:prev]">Previous</a></li>
            {{ endif }}
            {{ endif }}
            {{ for page in [products:pagenumbers] }}
            {{ if [page] == [products:current] }}
            <li class="active">[products:current]</li>
            {{ else }}
            <li><a href="?page=[page]{{ ifpresent [linkarguments] }}&amp;[linkarguments]{{ endif }}"
                    title="Go to page [page]">[page]</a></li>
            {{ endif }}
            {{ endfor }}
            {{ if [products:next] }}
            {{ if [products:next] < [products:last] }} <li><a
                    href="?page=[products:next]{{ ifpresent [linkarguments] }}&amp;[linkarguments]{{ endif }}"
                    title="Go to page [products:next]">Next</a></li>
                {{ endif }}
                <li><a href="?page=[products:last]{{ ifpresent [linkarguments] }}&amp;[linkarguments]{{ endif }}"
                        title="Go to page [products:last]">Last</a></li>{{ endif }}
        </ol>
    </nav>
    {{ endif }}

    {{ elif [query] }}
    <p>No products found for &quot;[query]&quot;.</p>
    {{ elif [supplier] }}
    <p>No products are sourced from <a href="/supplier/[supplier:name]">[supplier:name]</a>.</p>
    {{ endif }}
    {{ else }}
    <p class="info">You have no products just yet. Create one using the form below.</p>
    {{ endif }}
</section>

<section id="products_new">
    <h3>Create a product or part:</h3>
    {{ inline forms/product.html }}
</section>
[footer]
